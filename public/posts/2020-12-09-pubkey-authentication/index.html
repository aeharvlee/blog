<!DOCTYPE html>


<html lang="ko-kr" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>Pubkey Authentication not working - Road to Architect</title>
<meta name="description" content="">

<link rel="icon" type="image/x-icon" href="aeharvlee.github.io/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="aeharvlee.github.io/favicon.png">



    





    
    
    

    
        <link rel="stylesheet" href="/aeharvlee.github.io/css/style.6155b6d8eded05b985178f56a637943b3e7fcfccc913d9c656bbebce7c91cc6b.css" integrity="sha256-YVW22O3tBbmFF49WpjeUOz5/z8zJE9nGVrvrznyRzGs=">
    





    





    
        <link rel="stylesheet" href="aeharvlee.github.io/css/my.css?rnd=1625294663">
    




    





    
        <script src="aeharvlee.github.io/js/main.js?rnd=1625294663" type="text/javascript" charset="utf-8"></script>
    


<meta property="og:title" content="Pubkey Authentication not working" />
<meta property="og:description" content="λ¦¬λ¨νΈ μ„λ²„μ™€ ν¨μ¤μ›λ“ μ…λ ¥ μ—†μ΄ λΉ„λ€μΉ­ ν‚¤λ΅ μ›κ²© μ ‘μ†μ„ ν•κ³  μ‹¶μ€λ°, ν‚¤λ¥Ό μ΄μ©ν• μ ‘μ†μ΄ λμ§€ μ•κ³ , ν”„λ΅¬ν”„νΈμ—μ„ ν¨μ¤μ›λ“λ¥Ό μ”κµ¬ν•λ” κ²½μ° μ–΄λ–»κ² λ€μ²ν•λ©΄ μΆ‹μ„μ§€λ¥Ό μ•μ•„λ΄…μ‹λ‹¤.
μ €μμ λ΅μ»¬ ν΄λΌμ΄μ–ΈνΈ μ΄μμ²΄μ λ” MacOS Bigsur, λ¦¬λ¨νΈ μ„λ²„μ κ²½μ° CentOS 7μΌλ΅ λμ–΄ μλ‹¤λ” κ²ƒμ„ λ¨Όμ € μ•λ ¤λ“λ¦½λ‹λ‹¤.
 νΌλΈ”λ¦­ ν‚¤λ¥Ό μ›κ²© μ„λ²„μ— μ λ‘μ—κ³ , λ΅μ»¬μ— μ§μ΄ λ§λ” κ°μΈ ν‚¤λ„ μλ” μƒνƒμ—μ„ ν‚¤λ¥Ό μ§€μ •ν•μ—¬ ν†µμ‹ ν•λ ¤ ν–μμ—λ„ μ‹¤ν¨ν• κ²½ν—μ΄ μμΌμ‹λ‹¤λ©΄ λ‹¤μκ³Ό κ°™μ€ κ²ƒλ“¤μ„ μ κ²€ν•΄λ³΄μ‹κΈ° λ°”λλ‹λ‹¤.
1. Check remote server μ›κ²© μ„λ²„μ /etc/ssh/ssh/sshd_config νμΌμ— PubkeyAuthentication yes ν•­λ©μ΄ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤." />
<meta property="og:type" content="article" />
<meta property="og:url" content="aeharvlee.github.io/posts/2020-12-09-pubkey-authentication/" /><meta property="og:image" content="aeharvlee.github.io/images/og-featured.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-09T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2020-12-09T00:00:00&#43;00:00" />


<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="aeharvlee.github.io/images/og-featured.png"/>

<meta name="twitter:title" content="Pubkey Authentication not working"/>
<meta name="twitter:description" content="λ¦¬λ¨νΈ μ„λ²„μ™€ ν¨μ¤μ›λ“ μ…λ ¥ μ—†μ΄ λΉ„λ€μΉ­ ν‚¤λ΅ μ›κ²© μ ‘μ†μ„ ν•κ³  μ‹¶μ€λ°, ν‚¤λ¥Ό μ΄μ©ν• μ ‘μ†μ΄ λμ§€ μ•κ³ , ν”„λ΅¬ν”„νΈμ—μ„ ν¨μ¤μ›λ“λ¥Ό μ”κµ¬ν•λ” κ²½μ° μ–΄λ–»κ² λ€μ²ν•λ©΄ μΆ‹μ„μ§€λ¥Ό μ•μ•„λ΄…μ‹λ‹¤.
μ €μμ λ΅μ»¬ ν΄λΌμ΄μ–ΈνΈ μ΄μμ²΄μ λ” MacOS Bigsur, λ¦¬λ¨νΈ μ„λ²„μ κ²½μ° CentOS 7μΌλ΅ λμ–΄ μλ‹¤λ” κ²ƒμ„ λ¨Όμ € μ•λ ¤λ“λ¦½λ‹λ‹¤.
 νΌλΈ”λ¦­ ν‚¤λ¥Ό μ›κ²© μ„λ²„μ— μ λ‘μ—κ³ , λ΅μ»¬μ— μ§μ΄ λ§λ” κ°μΈ ν‚¤λ„ μλ” μƒνƒμ—μ„ ν‚¤λ¥Ό μ§€μ •ν•μ—¬ ν†µμ‹ ν•λ ¤ ν–μμ—λ„ μ‹¤ν¨ν• κ²½ν—μ΄ μμΌμ‹λ‹¤λ©΄ λ‹¤μκ³Ό κ°™μ€ κ²ƒλ“¤μ„ μ κ²€ν•΄λ³΄μ‹κΈ° λ°”λλ‹λ‹¤.
1. Check remote server μ›κ²© μ„λ²„μ /etc/ssh/ssh/sshd_config νμΌμ— PubkeyAuthentication yes ν•­λ©μ΄ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤."/>









    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header class="common-header"> 
            
                <h1 class="site-title">
    <a href="/aeharvlee.github.io">Road to Architect</a>
</h1>

    <nav>
        
        
        <a class="" href="aeharvlee.github.io/aeharvlee.github.io/posts/" title="Archive">Archive</a>
        
    </nav>


            
        </header>
        <main id="main" tabindex="-1"> 
            
    
    
    <article class="post">
        <header class="post-header">
            <h1 class="post-title">Pubkey Authentication not working</h1>
        </header>
        <aside>
            <nav id="TableOfContents">
  <ol>
    <li><a href="#1-check-remote-server">1. Check remote server</a>
      <ol>
        <li><a href="#11-lets-add-pubkey">1.1 Let&rsquo;s Add Pubkey</a></li>
      </ol>
    </li>
    <li><a href="#2-check-local-and-remote-server-both">2. Check local and remote server both</a></li>
  </ol>
</nav>
        </aside>
        <div class="content">
            <blockquote>
<p>λ¦¬λ¨νΈ μ„λ²„μ™€ ν¨μ¤μ›λ“ μ…λ ¥ μ—†μ΄ λΉ„λ€μΉ­ ν‚¤λ΅ μ›κ²© μ ‘μ†μ„ ν•κ³  μ‹¶μ€λ°, ν‚¤λ¥Ό μ΄μ©ν• μ ‘μ†μ΄ λμ§€ μ•κ³ , ν”„λ΅¬ν”„νΈμ—μ„ ν¨μ¤μ›λ“λ¥Ό μ”κµ¬ν•λ” κ²½μ° μ–΄λ–»κ² λ€μ²ν•λ©΄ μΆ‹μ„μ§€λ¥Ό μ•μ•„λ΄…μ‹λ‹¤.</p>
<p>μ €μμ λ΅μ»¬ ν΄λΌμ΄μ–ΈνΈ μ΄μμ²΄μ λ” MacOS Bigsur, λ¦¬λ¨νΈ μ„λ²„μ κ²½μ° CentOS 7μΌλ΅ λμ–΄ μλ‹¤λ” κ²ƒμ„ λ¨Όμ € μ•λ ¤λ“λ¦½λ‹λ‹¤.</p>
</blockquote>
<p>νΌλΈ”λ¦­ ν‚¤λ¥Ό μ›κ²© μ„λ²„μ— μ λ‘μ—κ³ , λ΅μ»¬μ— μ§μ΄ λ§λ” κ°μΈ ν‚¤λ„ μλ” μƒνƒμ—μ„ <strong>ν‚¤λ¥Ό μ§€μ •ν•μ—¬ ν†µμ‹ ν•λ ¤ ν–μμ—λ„ μ‹¤ν¨ν• κ²½ν—</strong>μ΄ μμΌμ‹λ‹¤λ©΄ λ‹¤μκ³Ό κ°™μ€ κ²ƒλ“¤μ„ μ κ²€ν•΄λ³΄μ‹κΈ° λ°”λλ‹λ‹¤.</p>
<h2 id="1-check-remote-server">1. Check remote server</h2>
<p>μ›κ²© μ„λ²„μ <code>/etc/ssh/ssh/sshd_config</code> νμΌμ— <code>PubkeyAuthentication yes</code> ν•­λ©μ΄ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤. sshd μ„¤μ •μ—μ„ μ•„μ μ΄λ¥Ό λ§‰μ•„λ‘” κ²½μ° ν‚¤λ¥Ό ν™μ©ν• μ ‘μ†μ΄ λ¶κ°€λ¥ν•©λ‹λ‹¤.
λ§μ•½ μ„¤μ •μ„ λ³€κ²½ν•΄μ£Όμ—μΌλ©΄ <code>service sshd restart</code> ν•΄μ£Όμ‹κΈ° λ°”λλ‹λ‹¤. λ³€κ²½λ μ„¤μ •μ„ λ΅λ“ν•΄μ•Όν•λ‹κΉμ”. βοΈ</p>
<h3 id="11-lets-add-pubkey">1.1 Let&rsquo;s Add Pubkey</h3>
<p>ν‚¤λ΅ μ ‘μ†ν•λ ¤λ” λ¦¬λ¨νΈ μ„λ²„μ <code>.ssh/authorized_keys</code> νμΌμ„ μ§μ ‘ ν™•μΈν•μ…”μ„ λ‚΄κ°€ κ°–κ³  μλ” κ°μΈν‚¤μ™€ λ§¤μΉ­λλ” κ³µκ°ν‚¤κ°€ μ λ€λ΅ λ“±λ΅λμ–΄ μλ”μ§€ ν™•μΈν•΄λ³Ό μλ„ μκ² μ§€λ§, ν™•μ‹¤ν•κ² ν•κΈ° μ„ν•΄ ν‚¤λ¥Ό μ§μ ‘ μ¶”κ°€ν•΄μ£Όλ„λ΅ ν•©μ‹λ‹¤. μμ‘μ—… λ³΄λ‹¤λ” κ·Έλλ„ μ»¤λ§¨λ“λ΅ ν• λ² λ” ν•΄μ£Όλ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤. β¨οΈ</p>
<p><code>ssh-copy-id -i ~/.ssh/id_rsa_macbook_pro15.pub user@123.456.789.123 -p 28888</code></p>
<p>λ΅μ»¬μ—μ„ μ„μ™€ κ°™μ€ μ»¤λ§¨λ“λ¥Ό μ…λ ¥ν•μ—¬ λ¦¬λ¨νΈ μ„λ²„μ— ν‚¤λ¥Ό μ¶”κ°€ν•΄μ£Όλ„λ΅ ν•©μ‹λ‹¤.. μ„ μ»¤λ§¨λ“μ κ°€μ •μ€ μ•„λμ™€ κ°™μµλ‹λ‹¤.</p>
<ul>
<li>μ ‘μ†ν•λ ¤λ” λ¦¬λ¨νΈ serverμ μ•„μ΄ν”Ό μ£Όμ†κ°€ 123.456.789.123, ssh μ ‘μ†ν•  λ• μ‚¬μ©ν•λ” ν¬νΈλ” 28888</li>
<li>λ΅μ»¬μ private key νμΌμ€ ν„μ¬ <code>/Users/aeharvlee/local/.ssh/id_rsa_macbook_pro15</code> λ΅ λμ–΄ μμΌλ©° λ¦¬λ¨νΈ μ„λ²„μ user κ³„μ •μΌλ΅ μ ‘κ·Όμ‹λ„</li>
</ul>
<h2 id="2-check-local-and-remote-server-both">2. Check local and remote server both</h2>
<p>1λ²μ—μ„ λ§¤μΉ­λλ” κ³µκ° ν‚¤λ¥Ό μ μ¶”κ°€ν•΄μ£Όμ…¨λ‹¤λ©΄, μ΄μ  λ””λ²„κΉ…ν•  μ‹κ°„μ…λ‹λ‹¤. μ ‘μ†μ„ μ‹λ„ν•λ” λ΅μ»¬μ λ΅κ·Έμ™€ λ™μ‹μ— νƒ€κ² μ„λ²„μΈ λ¦¬λ¨νΈ μ„λ²„μ λ΅κ·Έλ¥Ό μ‚΄ν΄λ³΄λ©΄ λ©λ‹λ‹¤.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ μ„λ²„μ— μ—°κ²°ν•  λ•μ κ³Όμ •μ„ μƒμ„Έν μ¶λ ¥ν•΄λ³΄λ„λ΅ ν•©λ‹λ‹¤.</span>
$ ssh -i ~/.ssh/id_rsa_macbook_pro15 user@123.456.789.123 -p <span style="color:#ae81ff">28888</span> -v

<span style="color:#75715e"># λ¦¬λ¨νΈ μ„λ²„μΈ΅μ λ΅κ·Έλ¥Ό ν™•μΈν•λ„λ΅ ν•©λ‹λ‹¤.</span>
sudo tail -f /var/log/secure
</code></pre></div><p>λ¨Όμ € ν΄λΌμ΄μ–ΈνΈ μΈ΅ ssh μ ‘μ† μ‹λ„ λ΅κ·Έλ¥Ό μ‚΄ν΄λ³΄μ‹λ©΄, μ¤‘κ°„μ— ν‚¤λ΅ μ ‘μ†μ„ μ‹λ„ν•λ” κµ¬κ°„μ΄ μ λμ—λ”μ§€, μ•„λ‹λ©΄ ν•΄λ‹Ή κµ¬κ°„μ΄ μ λ€λ΅ ν†µκ³Όλμ§€ μ•μ•„ κ²°κµ­ ν¨μ¤μ›λ“ μΈμ¦μΌλ΅ λ„μ–΄κ°”λ”μ§€λ¥Ό μ‚΄ν΄λ³Ό μ μμµλ‹λ‹¤.</p>
<p>λ§μ•½ ν¨μ¤μ›λ“ μΈμ¦μΌλ΅ λ„μ–΄κ°”λ‹¤λ©΄ κ·Έμ— λ€ν• μ΄μ κ°€ λ°”λ΅ λ¦¬λ¨νΈ μ„λ²„μ λ΅κ·Έμ— λ‚¨μµλ‹λ‹¤. μ €μ κ²½μ° λ¦¬λ¨νΈ μ„λ²„μ λ΅κ·Έλ¥Ό ν™•μΈν•΄λ³΄λ‹, μ ‘μ†ν•λ ¤λ” κ³„μ •μ λ””λ ‰ν† λ¦¬ κ¶ν•μ΄ λ§μ§€ μ•λ‹¤λ” μ΄μ λ΅ μ ‘μ†μ΄ μ•λλ‹¤λ” κ²ƒμ„ ν™•μΈν–μµλ‹λ‹¤. λ”°λΌμ„ κ·Έμ— λ§κ² μ•„λμ™€ κ°™μ΄ μ΅°μΉλ¥Ό μΉν•΄μ£Όμ—κ³  κ·Έ κ²°κ³Ό μ΄μ λ” μ •μƒ μ ‘μ†μ΄ λκ³  μμµλ‹λ‹¤. β”οΈ</p>
<pre><code>chmod g-w /home/user/
chmod 700 .ssh/
chmod 600 .ssh/authorized_keys
</code></pre><p>ν¬κ² μ–΄λ µμ§„ μ•μ§€λ§ ν• λ² λ°μ„ μλ» λ””λ””λ©΄ μ‹κ°„μ„ λ§μ΄ ν—λΉ„ν•  μ μλ” λ¬Έμ λΌμ„, μ €μ²λΌ ν—¤λ§¤μ‹λ” λ¶„λ“¤μ΄ λ§μ΄ μ—†κΈΈ λ°”λΌλ” λ§μμ—μ„ κΈ€μ„ μ‘μ„±ν–μµλ‹λ‹¤. λ„μ›€μ΄ λκΈΈ λ°”λλ‹λ‹¤. π”†</p>

        </div>

        

    


<div class="post-info">
    
        <div class="post-date">2020-12-09</div>
    
    <div class="post-taxonomies">
        
            
    </div>
</div>

    </article>

    
        
    <div class="pagination post-pagination">
        <div class="left pagination-item disabled">
            
        </div>
        <div class="right pagination-item ">
            
                <a href="/aeharvlee.github.io/posts/2020-08-20-even-faster-reverse-dns-lookup-using-goroutines/">Reverse DNS Lookup Concurrently with Go</a>
            
        </div>
    </div>

    

    
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "aeharv" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    


        </main>
        
            <footer class="common-footer">
    
    

    <div class="common-footer-bottom">
        
        <div class="copyright">
            <p>Β© Hyunwoo Lee, 2021<br>
            Powered by <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" rel="noopener noreferrer" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.
            </p>  
        </div> 

        

    


   
    </div>
</footer>

        
    </div>
</body>
</html>
